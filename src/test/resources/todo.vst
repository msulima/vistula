'''# javascript
let boxInput = new vistula.ObservableImpl();
'''

sample = {
  "title": "Finish TodoMVC",
  "completed": false
}

# todos = ([1, 2] or arrayPush(todos, submitTasks) for todos in submitTasks)
todos = [sample]

app = '''# html
<form id="task" method="POST">
  <input name="title" placeholder="What needs to be done?"/>
</form>
<h3>{{ boxInput }}</h3>
<div>
  <ul>
    {% for todo in todos %}
      <li>
        {% if todo.completed %}
          âˆš
        {% else %}
          x
        {% endif %}
        {{ todo.title }}
      </li>
    {% endfor %}
  </ul>
</div>
'''

stdlib.dom.appendChild("app", app)

'''# javascript
document.getElementById("task").elements["title"].addEventListener("input", function (ev) {
  boxInput.rxPush(ev.target.value);
});
document.getElementById("task").addEventListener("submit", function (ev) {
  ev.preventDefault();
  let elements = ev.srcElement.elements;
  let formValue = {};
  Object.keys(elements).forEach(function (key) {
    formValue[elements[key].name] = elements[key].value;
  });
  boxInput.rxPush(formValue.title);
});
'''
